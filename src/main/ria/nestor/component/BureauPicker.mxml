<?xml version="1.0" ?>
<mx:Panel xmlns:mx="http://www.adobe.com/2006/mxml">
    <mx:Script><![CDATA[
        import mx.managers.PopUpManager;
        import mx.rpc.events.ResultEvent;

        import nestor.model.Bureau;
        import nestor.model.Address;

        public var bureau:Bureau;

        private function save():void {
            bureau = new Bureau();
            var address:Address = new Address();

            address.line = street.text;
            address.number = streetNumber.text;
            address.postalCode = postalCode.text;

            bureau.address = address;

            bureau.name_fr = bureauName_fr.text;
            bureau.name_nl = bureauName_nl.text;
            srv.save(bureau);
        }

        private function createResult(event:ResultEvent):void
        {
            PopUpManager.removePopUp(this);

        }

                   ]]>
    </mx:Script>

    <mx:RemoteObject id="srv" destination="picker">
        <mx:method name="save" result="createResult(event)"/>
    </mx:RemoteObject>

    <mx:VBox borderStyle="solid" paddingTop="10" paddingBottom="10"
             paddingLeft="10" paddingRight="10">

        <mx:Form>
            <mx:VBox>
                <mx:FormHeading label="Create new bureau"/>
                <mx:HBox>
                    <mx:FormItem label="French Name:">
                        <mx:TextInput id="bureauName_fr"/>
                    </mx:FormItem>
                    <mx:FormItem label="NL Name:">
                        <mx:TextInput id="bureauName_nl"/>
                    </mx:FormItem>
                </mx:HBox>
                <mx:HBox>
                    <mx:FormItem label="Address:">
                        <mx:TextInput id="street"/>
                    </mx:FormItem>
                    <mx:FormItem>
                        <mx:TextInput id="streetNumber"/>
                    </mx:FormItem>
                </mx:HBox>
                <mx:FormItem label="Code Postal:">
                    <mx:TextInput id="postalCode"/>
                </mx:FormItem>
            </mx:VBox>
        </mx:Form>
        <mx:Button label="Save" click="save()" bottom="10" left="10" height="36" width="63"/>
        <mx:Button label="Cancel" click="PopUpManager.removePopUp(this)" bottom="10" left="10" height="36" width="63"/>
    </mx:VBox>
</mx:Panel>